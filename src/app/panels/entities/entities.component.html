<div class="form-group">
  <app-input-filter-add
    [filterCount]="countFiltered"
    [showAdd]="true"
    [showFilterCount]="true"
    (onFilter)="doFilter($event)"
    [title]="'Entity'"
    [titlePlural]="'Entities'"
    [showList]="true"
    [listValues]="entityTypesPlural"
    [listValue]="entityType"
    (onListChange)="doEntityTypeChange($event)"
    [showFlash]="true"
    [showPlay]="!this.showActiveOnly"
    [showPause]="!this.showActiveOnly"
    [showAll]="true"
    [radioChoice]="rdoActiveDormantAll"
    [countFlash]="countTasks"
    [countPause]="countDormant"
    [countPlay]="countActive"
    [countAll]="countAll"
    (onChoice)="doChangeRdo($event)"
    [titleFlash]="'Entities with active tasks'"
    [titlePlay]="'Active Entities'"
    [titleAll]="'All Entities'"
    [titlePause]="'Dormant Entities'"
    [captionFlash]="'With tasks'"
    [captionPlay]="'Active'"
    [captionAll]="'All'"
    [captionPause]="'Inactive'"
    [isNarrow]="isNarrow"
    [showInputFilter]="entityType != entityTypesPlural.size - 1"
  ></app-input-filter-add>
  <div [hidden]="entityType == entityTypesPlural.size - 1">
    <div
      [class.entities-full]="isFullScreen()"
      [class.entities-half]="isHalfScreen()"
      style="overflow-y: scroll; overflow-x: hidden; scrollbar-width: thin;"
    >
      <ng-container *ngFor="let t of entityTypeNames | keyvalue">
        <table
          class="table table-condensed table-bordered less-bottom"

          [hidden]="entityType != t.key"
        >
          <thead class="info">
            <tr class="info" >
              <th ><small>Name</small></th>
              <th ><small>Tasks</small></th>
              <th ><small>Suffix</small></th>
            </tr>
          </thead>

          <tbody>
            <ng-container *ngFor="let e of entities | keyvalue">
              <!-- <ng-container
              *ngIf="
                e.value.type == entityTypeNames.get(t.key).name.toLowerCase()
              "
              
            > -->
              <ng-container
                *ngIf="
                  e.value.type == entityTypeNames.get(t.key).name.toLowerCase()
                "
              >
                <tr
                  [class.info]="e.value.isActive"
                  [hidden]="isHiddenMap.get(e.key)"
                  
                  
                >
                  <td >
                    <a href="#" (click)="doEntityChoose(e.key)"
                      [attr.id] = "e.key"
                      [attr.name] = "e.key"
                      routerLink ="."
                      fragment="e.key"
                      ><span [class.text-primary-bold]="e.key == selectedEntityKey">{{ e.value.name }}</span>
                    </a>
                  </td>
                  <td><span [class.text-primary-bold]="e.key == selectedEntityKey">{{ e.value.tasksCount }}</span></td>
                  <td ><span [class.text-primary-bold]="e.key == selectedEntityKey">{{ e.value.suffix }}</span></td>
                </tr>
              </ng-container>
            </ng-container>
          </tbody>

          <!-- <tbody [hidden]="entityType != 0">
          <tr
            *ngFor="let e of entities | keyvalue"
            [hidden]="isHiddenMap.get(e.key)"
            [class.info]="e.value.isActive"
          >
            <td>
              <a href="#" (click)="doEntityChoose(e.key)"
                >{{ e.value.name }}
              </a>
            </td>
            <td>{{ e.value.tasksCount }}</td>
            <td>{{ e.value.suffix }}</td>
          </tr>
        </tbody> -->
        </table>
      </ng-container>

      <small class="text-primary"
        >Total {{ countAll }}. Showing
        {{ (rdoActiveDormantAll == "all" ? "all " : "") + countFiltered }}
        {{
          rdoActiveDormantAll == "play"
            ? "active "
            : rdoActiveDormantAll == "pause"
            ? "dormant "
            : ""
        }}
        {{ entityTypeNamePlural.toLowerCase() }}
        {{ rdoActiveDormantAll == "flash" ? " with outstanding tasks" : "" }}
      </small>
    </div>
  </div>
  <app-input-date
    [title]="'System Date'"
    [showFlash]="false"
    [showCD]="false"
    [showPaperclip]="false"
    [inline]="true"
    [showTitle]="true"
    [disabled]="true"
  >
  </app-input-date>

  <!-- <app-input-duo
        [isNarrow]="isNarrow"
        [doHideByFilter]="false"
        [typeLeft]="'date'"
        [titleLeft]="'System Date'"
        [disabledLeft] = "true"

        [typeRight]="'checkbox'"
        [titleRight]="'Active Only'"
        [valueRight] = "true"

        (onChangeRight)="doChangeShowActive($event)"
      >
      </app-input-duo> -->

  <div class="btn-group wide input-group-sm" style="vertical-align: middle;">
    <app-input-checkbox
      [title]="'Active Only'"
      [value]="true"
      (onChange)="doChangeShowActive($event)"
      [inline]="true"
    ></app-input-checkbox>
    <a href="#" class="btn primary-color" style="margin-left: 5px;">
      <small>
        <span class="glyphicon glyphicon-log-out"></span>
        <span [hidden]="isNarrow" class="hidden-xs">&nbsp; Log Out</span
        >&nbsp;</small
      >
    </a>
  </div>
</div>

<!-- Modal content-->
<!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
<!-- <div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    
    <div class="modal-content">
      <div class="modal-header">
        
        <h4 class="modal-title">Settings</h4>
      </div>
      <div class="modal-body">
        <p>Custom settings...</p>
      </div>
      <div class="modal-footer">
        <a href="#" class="btn primary-color" data-dismiss="modal">
          <small>
            <span class="glyphicon glyphicon-remove"></span>
            <span [hidden]="isNarrow" class="hidden-xs">&nbsp; Close</span
            >&nbsp;</small
          >
        </a>
        
      </div>
    </div>
  </div>
</div> -->

<!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
