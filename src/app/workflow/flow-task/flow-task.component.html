
<app-input-panel
  [title]="workFlow.name"
  [collapsed]="false"
  [panelPrimary]="true"
  [noPadding]="true"
  [showSaveNext]="true"
  [showSavePrev]="workFlow.currentTaskIndex > 0"
  [showViewAll] = "workFlow.tasks.length>10"
  [showClose] = "true"
  [showSync] = "false"
  [syncValue] = "this.workFlow.notifyIs"
  (onClose) = "onClose.emit('')"
  (onShowAll) = "doShowAll($event)"
  (onSaveNext)="doSaveNext()"
  (onSavePrev)="doSavePrev()"
  (document:keydown.control.arrowup)="doSavePrev()"
  (document:keydown.control.arrowdown)="doSaveNext()"
  (onMakeEID)="doMakePanelIED($event)"
  (onSync) = "doSync($event)"
>
  <ng-container *ngFor="let t of workFlow.tasks; let i = index">
    <div [hidden]="!showStep(i)">
      <app-flow-confirm
        *ngIf="t.type == 'confirm'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
        [showSavePrev]="workFlow.currentTaskIndex > 0"
        [showSaveNext]="true"
      ></app-flow-confirm>
      <app-flow-date
        *ngIf="t.type == 'date'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
        [showSavePrev]="workFlow.currentTaskIndex > 0"
        [showSaveNext]="true"
      ></app-flow-date>
      <app-flow-select
        *ngIf="t.type == 'select'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
        [showSavePrev]="workFlow.currentTaskIndex > 0"
        [showSaveNext]="true"
        (onChange) = "doSaveNext()"
      ></app-flow-select>
      <app-flow-set-reminder
        *ngIf="t.type == 'set-reminder'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
      ></app-flow-set-reminder>
      <app-flow-submit-docs
        *ngIf="t.type == 'submit-docs'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
        (onDrill)="doDrill()"
      ></app-flow-submit-docs>
      <app-flow-upload-docs
        *ngIf="t.type == 'upload-docs'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
        (onDrill)="doDrill()"
      ></app-flow-upload-docs>
      <app-flow-form
        *ngIf="t.type == 'form'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
      ></app-flow-form>
      <app-flow-message
        *ngIf="t.type == 'message'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
      ></app-flow-message>
      <app-flow-text
        *ngIf="t.type == 'text'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
        (onEnter) = "doSaveNext()"
      ></app-flow-text>
      <app-flow-text
        *ngIf="t.type == 'number'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
      ></app-flow-text>
      <app-flow-textarea
        *ngIf="t.type == 'desc'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
      ></app-flow-textarea>
      <app-flow-address
        *ngIf="t.type == 'address'"
        [stepNumber]="i + 1"
        [taskFlow]="t"
      ></app-flow-address>
    </div>
  </ng-container>
</app-input-panel>
